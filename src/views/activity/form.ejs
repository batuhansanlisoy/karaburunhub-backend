<form id="activity-form" action="/activity/create" method="POST" enctype="multipart/form-data">

  <!-- Kategori, BÃ¶lge, BaÅŸlÄ±k vs. (mevcut alanlar) -->
  <div class="mb-3">
      <label class="form-label" for="category_id">Etkinlik TÃ¼rÃ¼</label>
      <select class="form-select" name="category_id" id="category_id" required>
          <option value="">SeÃ§iniz</option>
          <% categories.forEach(category => { %>
              <option value="<%= category.id %>"><%= category.name %></option>
          <% }) %>
      </select>
  </div>

  <div class="mb-3">
      <label class="form-label" for="village_id">BÃ¶lge</label>
      <select class="form-select" name="village_id" id="village_id" required>
          <option value="">SeÃ§iniz</option>
          <% villages.forEach(village => { %>
              <option value="<%= village.id %>"><%= village.name %></option>
          <% }) %>
      </select>
  </div>

  <div class="mb-3">
      <label class="form-label">Etkinlik BaÅŸlÄ±ÄŸÄ±</label>
      <input type="text" name="name" class="form-control" required>
  </div>

  <div class="row">
      <div class="col-md-6 mb-3">
          <label class="form-label">BaÅŸlangÄ±Ã§ Tarihi</label>
          <input type="date" name="begin" class="form-control" required>
      </div>
      <div class="col-md-6 mb-3">
          <label class="form-label">BitiÅŸ Tarihi</label>
          <input type="date" name="end" class="form-control" required>
      </div>
  </div>

  <div class="mb-3">
      <label class="form-label">Etkinlik Metni</label>
      <textarea name="explanation" class="form-control" rows="5" placeholder="Etkinlik hakkÄ±nda detaylÄ± bilgi girin..."></textarea>
  </div>

  <!-- Adres -->
  <div class="mb-3">
      <label class="form-label">Adres</label>
      <input type="text" name="address" class="form-control" required>
  </div>

  <div class="row">
      <div class="col-md-6 mb-3">
          <label class="form-label">Latitude</label>
          <input type="text" name="latitude" class="form-control">
      </div>
      <div class="col-md-6 mb-3">
          <label class="form-label">Longitude</label>
          <input type="text" name="longitude" class="form-control">
      </div>
  </div>

  <!-- Kapak FotoÄŸrafÄ± -->
  <div class="mb-3">
      <label class="form-label">Kapak FotoÄŸrafÄ±</label>
      <input type="file" name="cover" accept="image/*" class="form-control">
  </div>

  <!-- Galeri FotoÄŸraflarÄ± -->
  <div class="mb-3">
      <label class="form-label">Galeri FotoÄŸraflarÄ±</label>
      <input type="file" name="gallery[]" accept="image/*" multiple class="form-control">
  </div>

  <!-- ðŸ“Œ Dinamik Etkinlik Takvimi (GÃ¼n -> Saatler) -->
  <div class="mb-3">
      <label class="form-label">Etkinlik Takvimi</label>
      <div id="days-wrapper"></div>
      <button type="button" id="add-day-btn" class="btn btn-primary btn-sm mt-2">GÃ¼n Ekle</button>
  </div>

  <!-- GÃ¶nder Butonu -->
  <button type="submit" class="btn btn-primary w-100 mt-3">Kaydet</button>
</form>

<script>
let dayCount = 0;

function addHourInput(dayIndex) {
    const hoursWrapper = document.getElementById(`hours-wrapper-${dayIndex}`);
    const hourIndex = hoursWrapper.childElementCount;

    const div = document.createElement("div");
    div.className = "hour-item mb-2";
    div.innerHTML = `
        <input type="text" name="timeline[${dayIndex}][events][${hourIndex}][time]" class="form-control mb-1" required placeholder="Saat:Dakika">
        <input type="text" name="timeline[${dayIndex}][events][${hourIndex}][title]" class="form-control mb-1" placeholder="Etkinlik baÅŸlÄ±ÄŸÄ±" required>
    `;
    hoursWrapper.appendChild(div);
}

document.getElementById("add-day-btn").addEventListener("click", function() {
    const wrapper = document.getElementById("days-wrapper");

    const div = document.createElement("div");
    div.className = "day-section mb-3 p-3 border rounded";
    div.id = `day-${dayCount}`;
    div.innerHTML = `
        <label>GÃ¼n Tarihi:</label>
        <input type="date" name="timeline[${dayCount}][date]" class="form-control mb-2" required>
        <div id="hours-wrapper-${dayCount}"></div>
        <button type="button" class="btn btn-secondary btn-sm mt-2" onclick="addHourInput(${dayCount})">Saat Ekle</button>
    `;
    wrapper.appendChild(div);

    // BaÅŸta 1 saat eklemek isteyebilirsin
    addHourInput(dayCount);

    dayCount++;
});

// Ä°lk gÃ¼n otomatik ekle
document.getElementById("add-day-btn").click();
</script>
